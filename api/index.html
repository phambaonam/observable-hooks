<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Core | Observable Hooks</title>
    <meta name="description" content="React hooks for RxJS Observables. Simple, flexible, testable and performant.">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#9B59B6">
    
    <link rel="preload" href="/assets/css/0.styles.50069be7.css" as="style"><link rel="preload" href="/assets/js/app.2600191b.js" as="script"><link rel="preload" href="/assets/js/3.c8cfc7ab.js" as="script"><link rel="preload" href="/assets/js/9.1976d09d.js" as="script"><link rel="preload" href="/assets/js/5.52e4f033.js" as="script"><link rel="preload" href="/assets/js/4.ab8b6a84.js" as="script"><link rel="prefetch" href="/assets/js/10.d87a3d15.js"><link rel="prefetch" href="/assets/js/11.167dcea9.js"><link rel="prefetch" href="/assets/js/12.8708eaac.js"><link rel="prefetch" href="/assets/js/13.d8c8df4a.js"><link rel="prefetch" href="/assets/js/14.5918bfa9.js"><link rel="prefetch" href="/assets/js/15.bb8bfb1b.js"><link rel="prefetch" href="/assets/js/16.fb0217e8.js"><link rel="prefetch" href="/assets/js/17.9618772c.js"><link rel="prefetch" href="/assets/js/18.14f0072c.js"><link rel="prefetch" href="/assets/js/19.7ef56f63.js"><link rel="prefetch" href="/assets/js/6.043bf519.js"><link rel="prefetch" href="/assets/js/7.b2575579.js"><link rel="prefetch" href="/assets/js/8.528a034e.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.bffca74e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.50069be7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Observable Hooks</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/api/" class="nav-link router-link-exact-active router-link-active">
  API
</a></div><div class="nav-item"><a href="/examples/" class="nav-link">
  Examples
</a></div> <a href="https://github.com/crimx/observable-hooks" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/api/" class="nav-link router-link-exact-active router-link-active">
  API
</a></div><div class="nav-item"><a href="/examples/" class="nav-link">
  Examples
</a></div> <a href="https://github.com/crimx/observable-hooks" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>API Reference</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/" class="active sidebar-link">Core</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/#useobservable" class="sidebar-link">useObservable</a></li><li class="sidebar-sub-header"><a href="/api/#useobservablecallback" class="sidebar-link">useObservableCallback</a></li><li class="sidebar-sub-header"><a href="/api/#usesubscription" class="sidebar-link">useSubscription</a></li><li class="sidebar-sub-header"><a href="/api/#useobservablestate" class="sidebar-link">useObservableState</a></li></ul></li><li><a href="/api/suspense.html" class="sidebar-link">Suspense</a></li><li><a href="/api/helpers.html" class="sidebar-link">Helpers</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="core"><a href="#core" class="header-anchor">#</a> Core</h1> <h2 id="useobservable"><a href="#useobservable" class="header-anchor">#</a> useObservable</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code>useObservable<span class="token operator">&lt;</span>TOutput<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token operator">&lt;</span>TOutput<span class="token operator">&gt;</span>
useObservable<span class="token operator">&lt;</span>TOutput<span class="token punctuation">,</span> TInputs<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  <span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">,</span>
  inputs<span class="token operator">:</span> TInputs
<span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token operator">&lt;</span>TOutput<span class="token operator">&gt;</span>
</code></pre></div><p>React function components will be called many times during its life cycle. Create or transform Observables in init function so that the operations won't be repeatedly performed.</p> <p>Accepts a function that returns an Observable. Optionally accepts an array of dependencies which will be turned into Observable and be passed to the init function.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p><code>useObservable</code> will call <code>init</code> once and always return the same Observable. It is not safe to access closure (except other Observables) directly inside <code>init</code>. You should pass them as dependencies through the second argument.</p></div> <div class="custom-block danger"><p class="custom-block-title">CAUTION</p> <p>Due to hooks policy you can either offer or omit the dependencies array but do not change to one another during Component's life cycle. The length of the dependencies array must also be fixed.</p></div> <p><strong>Type parameters:</strong></p> <ul><li><code>TOutput</code> Output value within Observable.</li> <li><code>TInputs</code> An readonly tuple of all dependencies.</li></ul> <p><strong>Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>init</code></td> <td><code>(inputs$: Observable&lt;TInputs&gt;): Observable&lt;TOutput&gt;</code></td> <td>A pure function that, when applied to an Observable, returns an Observable.</td></tr> <tr><td><code>inputs</code></td> <td><code>TInputs</code></td> <td>An optional dependency array with fixed length. When one of the dependencies changes the Observable in <code>init</code> will emit an array of all the dependencies.</td></tr></tbody></table> <p><strong>Returns:</strong></p> <p><code>Observable&lt;TOutput&gt;</code> Always the same Observable.</p> <p><strong>Examples:</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">CompProps</span> <span class="token punctuation">{</span>
  isOpen<span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> Comp<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span>CompProps<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>showPanel<span class="token punctuation">,</span> setShowPanel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token comment">// Listen to props or state change</span>
  <span class="token keyword">const</span> enhanced$ <span class="token operator">=</span> <span class="token function">useObservable</span><span class="token punctuation">(</span>
    <span class="token parameter">inputs$</span> <span class="token operator">=&gt;</span> inputs$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>isOpen<span class="token punctuation">,</span> showPanel<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> isOpen <span class="token operator">&amp;&amp;</span> showPanel<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>props<span class="token punctuation">.</span>isOpen<span class="token punctuation">,</span> showPanel<span class="token punctuation">]</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Create Observable</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> now$ <span class="token operator">=</span> <span class="token function">useObservable</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">interval</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
    <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><p>Transform Observables:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// outers$ are created from other React-unrelated module</span>
<span class="token keyword">const</span> enhanced$ <span class="token operator">=</span> <span class="token function">useObservable</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> outers$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">mapTo</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Mix them all together:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> enhanced$ <span class="token operator">=</span> <span class="token function">useObservable</span><span class="token punctuation">(</span>
  <span class="token parameter">inputs$</span> <span class="token operator">=&gt;</span> isEven$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
    <span class="token function">withLatestFrom</span><span class="token punctuation">(</span>inputs$<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>isEven<span class="token punctuation">,</span> <span class="token punctuation">[</span>isOpen<span class="token punctuation">]</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> isEven <span class="token operator">&amp;&amp;</span> isOpen<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>props<span class="token punctuation">.</span>isOpen<span class="token punctuation">]</span>
<span class="token punctuation">)</span>
</code></pre></div><h2 id="useobservablecallback"><a href="#useobservablecallback" class="header-anchor">#</a> useObservableCallback</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code>useObservableCallback<span class="token operator">&lt;</span>TOutput<span class="token punctuation">,</span> TInput<span class="token punctuation">,</span> TParams<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  <span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">,</span>
  selector<span class="token operator">?</span><span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token operator">|</span> <span class="token keyword">function</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">function</span><span class="token punctuation">,</span> Observable<span class="token operator">&lt;</span>TOutput<span class="token operator">&gt;</span><span class="token punctuation">]</span>
</code></pre></div><p>Returns a callback function and an events Observable.</p> <p>Whenever the callback is called, the Observable will emit the first argument of the callback.</p> <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>v2.1.0</span> From <code>v2.1.0</code> optionally accepts a selector function which transforms an array of event arguments into a single value.
<div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>If you want value output instead of Observable see example on <a href="#useobservablestate">useObservableState</a>.</p></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p><code>useObservableCallback</code> will call <code>init</code> once and always return
the same Observable. It is not safe to access closure (except other Observables)
directly inside <code>init</code>. Use <a href="#useobservable"><code>useObservable</code></a> and <code>withLatestFrom</code> instead.</p></div> <p><strong>Type parameters:</strong></p> <ul><li><code>TOutput</code> Output value within Observable.</li> <li><code>TInput</code> Selected values.</li> <li><code>TParams</code> A tuple of event callback parameters.</li></ul> <p><strong>Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>init</code></td> <td><code>(inputs$: Observable&lt;TInputs&gt;): Observable&lt;TOutput&gt;</code></td> <td>A pure function that, when applied to an Observable, returns an Observable.</td></tr> <tr><td><code>selector</code></td> <td><code>(args: TParams): TInput</code></td> <td>An optional function that transforms an array of event arguments into a single value.</td></tr></tbody></table> <p><strong>Returns:</strong></p> <p><code>[(...args: TParams): void, Observable&lt;TOutput&gt;]</code> A tuple with the same callback-Observable pair.</p> <p><strong>Examples:</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useObservableCallback<span class="token punctuation">,</span> useSubscription <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'observable-hooks'</span>

<span class="token keyword">const</span> <span class="token function-variable function">Comp</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>onChange<span class="token punctuation">,</span> textChange$<span class="token punctuation">]</span> <span class="token operator">=</span> useObservableCallback<span class="token operator">&lt;</span>
    <span class="token builtin">string</span><span class="token punctuation">,</span>
    React<span class="token punctuation">.</span>FormEvent<span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">&gt;</span>
  <span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token parameter">event$</span> <span class="token operator">=&gt;</span> event$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
    <span class="token function">pluck</span><span class="token punctuation">(</span><span class="token string">'currentTarget'</span><span class="token punctuation">,</span> <span class="token string">'value'</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// or just use &quot;pluckCurrentTargetValue&quot; helper</span>

  <span class="token function">useSubscription</span><span class="token punctuation">(</span>textChange$<span class="token punctuation">,</span> <span class="token builtin">console</span><span class="token punctuation">.</span>log<span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>input <span class="token keyword">type</span><span class="token operator">=</span><span class="token string">&quot;text&quot;</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>onChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Transform event arguments:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useObservableCallback<span class="token punctuation">,</span> identity <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'observable-hooks'</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>onResize<span class="token punctuation">,</span> height$<span class="token punctuation">]</span> <span class="token operator">=</span> useObservableCallback<span class="token operator">&lt;</span>
  <span class="token builtin">number</span><span class="token punctuation">,</span>
  <span class="token builtin">number</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span><span class="token punctuation">(</span>identity<span class="token punctuation">,</span> <span class="token parameter">args</span> <span class="token operator">=&gt;</span> args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// onResize is called with width and hegiht</span>
<span class="token comment">// height$ gets height values</span>
<span class="token function">onResize</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="usesubscription"><a href="#usesubscription" class="header-anchor">#</a> useSubscription</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code>useSubscription<span class="token operator">&lt;</span>TInput<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  input$<span class="token operator">:</span> Observable<span class="token operator">&lt;</span>TInput<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  next<span class="token operator">?</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  error<span class="token operator">?</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  complete<span class="token operator">?</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token keyword">undefined</span>
<span class="token punctuation">)</span><span class="token operator">:</span> Subscription
</code></pre></div><p>Subscription will auto-unsubscribe when unmount, you can also unsubscribe manually.</p> <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>v2.0.0</span> From <code>v2.0.0</code> you can reference closure variables directly inside callback. <code>useSubscription</code> will ensure the latest callback is called.
<p>Accepts an Observable and optional <code>next</code>, <code>error</code>, <code>complete</code> functions. These functions must be in correct order. Use <code>undefined</code> or <code>null</code> for placeholder.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Note that changes of callbacks will not trigger an emission. If you need that just create another Observable of the callback with <a href="#useobservable"><code>useObservable</code></a>.</p></div> <p><strong>Type parameters:</strong></p> <ul><li><code>TInput</code> Input value within Observable.</li></ul> <p><strong>Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>input$</code></td> <td><code>Observable&lt;TInput&gt; | null | undefined</code></td> <td>Input Observable.</td></tr> <tr><td><code>next</code></td> <td><code>(value: TInput): void | null | undefined</code></td> <td>Notify when a new value is emitted.</td></tr> <tr><td><code>error</code></td> <td><code>(error: any): void | null | undefined</code></td> <td>Notify when a new error is thrown.</td></tr> <tr><td><code>complete</code></td> <td><code>(): void | null | undefined</code></td> <td>Notify when the Observable is complete.</td></tr></tbody></table> <p><strong>Returns:</strong></p> <p><code>Subscription</code> RxJs Subscription object.</p> <p><strong>Examples:</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> subscription <span class="token operator">=</span> <span class="token function">useSubscription</span><span class="token punctuation">(</span>events$<span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token keyword">type</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>On complete</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> subscription <span class="token operator">=</span> <span class="token function">useSubscription</span><span class="token punctuation">(</span>events$<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'complete'</span>
</code></pre></div><p>Access closure:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>debug<span class="token punctuation">,</span> setDebug<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> subscription <span class="token operator">=</span> <span class="token function">useSubscription</span><span class="token punctuation">(</span>events$<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>debug<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Invoke props callback</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> subscription <span class="token operator">=</span> <span class="token function">useSubscription</span><span class="token punctuation">(</span>events$<span class="token punctuation">,</span> props<span class="token punctuation">.</span>onEvent<span class="token punctuation">)</span>
</code></pre></div><h2 id="useobservablestate"><a href="#useobservablestate" class="header-anchor">#</a> useObservableState</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code>useObservableState<span class="token operator">&lt;</span>TState<span class="token punctuation">,</span> TSyncInit<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  input$<span class="token operator">:</span> Observable<span class="token operator">&lt;</span>TState<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token operator">:</span> TSyncInit <span class="token keyword">extends</span> <span class="token class-name">false</span> <span class="token operator">?</span> TState <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> TState
useObservableState<span class="token operator">&lt;</span>TState<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  input$<span class="token operator">:</span> Observable<span class="token operator">&lt;</span>TState<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  initState<span class="token operator">:</span> TState
<span class="token punctuation">)</span><span class="token operator">:</span> TState
useObservableState<span class="token operator">&lt;</span>TState<span class="token punctuation">,</span> TInput<span class="token punctuation">,</span> TSyncInit<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  <span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token keyword">function</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">[</span>TSyncInit <span class="token keyword">extends</span> <span class="token class-name">false</span> <span class="token operator">?</span> TState <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> TState<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">]</span>
useObservableState<span class="token operator">&lt;</span>TState<span class="token punctuation">,</span> TInput<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  <span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">,</span>
  initState<span class="token operator">:</span> TState
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">[</span>TState<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">]</span>
</code></pre></div><p>A helper to get value from an Observable.</p> <p>Accept an optional <code>initState</code> which will be directly passed to the result. But if sync values are also emitted from the Observable <code>initState</code> will be ignored.</p> <p>You can also use the regular <code>useState</code> with <a href="#usesubscription">useSubscription</a> directly which will trigger extra initial re-renders when sync values are emitted from the Observable (e.g. <code>of</code> or <code>startWith</code>).</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>It it recommended to use <code>initState</code> for simple primitive value. For others, init with the Observable to save some (re)computations.</p></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p><code>useObservableState</code> will call <code>init</code> once and always return the same Observable. It is not safe to access closure (except other Observables) directly inside <code>init</code>. Use <a href="#useobservable"><code>useObservable</code></a> and <code>withLatestFrom</code> instead.</p></div> <div class="custom-block danger"><p class="custom-block-title">CAUTION</p> <p>Due to hooks policy you can offer either a function or an Observable as the first argument but do not change to one another during Component's life cycle.</p></div> <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>v2.1.2</span> From <code>v2.1.2</code> you can pass <code>true</code> to <code>TSyncInit</code> generic to remove <code>undefined</code> from resulted type.
<hr> <p><strong>Type parameters:</strong></p> <ul><li><code>TState</code> Output state.</li> <li><code>TSyncInit</code> Does the Observable emit sync values?</li></ul> <p><strong>Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>input$</code></td> <td><code>Observable&lt;TState&gt;</code></td> <td>An Observable.</td></tr> <tr><td><code>initState</code></td> <td><code>TState</code></td> <td>Optional initial state.</td></tr></tbody></table> <p><strong>Returns:</strong></p> <p><code>TState</code> State value.</p> <hr> <p><strong>Type parameters:</strong></p> <ul><li><code>TState</code> Output state.</li> <li><code>TInput</code> Input values.</li> <li><code>TSyncInit</code> Does the Observable emit sync values?</li></ul> <p><strong>Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>init</code></td> <td><code>(input$: Observable&lt;TInput&gt;): Observable&lt;TState&gt;</code></td> <td>A pure function that, when applied to an Observable, returns an Observable.</td></tr> <tr><td><code>initState</code></td> <td><code>TState</code></td> <td>Optional initial state.</td></tr></tbody></table> <p><strong>Returns:</strong></p> <p><code>[TState, (input: TInput) =&gt; void]</code> A tuple with state-setState pair.</p> <hr> <p><strong>Examples:</strong></p> <p>Offer an Observable</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> count$ <span class="token operator">=</span> <span class="token function">useObservable</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">interval</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">useObservableState</span><span class="token punctuation">(</span>count$<span class="token punctuation">)</span>
</code></pre></div><p>Offer an init function</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>text<span class="token punctuation">,</span> updateText<span class="token punctuation">]</span> <span class="token operator">=</span> useObservableState<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>
  <span class="token parameter">text$</span> <span class="token operator">=&gt;</span> text$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><p>With different types</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>isValid<span class="token punctuation">,</span> updateText<span class="token punctuation">]</span> <span class="token operator">=</span> useObservableState<span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token parameter">text$</span> <span class="token operator">=&gt;</span>
  text$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">text</span> <span class="token operator">=&gt;</span> text<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><p>With init value:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> count$ <span class="token operator">=</span> <span class="token function">useObservable</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">interval</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">useObservableState</span><span class="token punctuation">(</span>count$<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><p>Or function with init value:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// Types now can be inferred</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>text<span class="token punctuation">,</span> updateText<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useObservableState</span><span class="token punctuation">(</span>
  <span class="token parameter">text$</span> <span class="token operator">=&gt;</span> text$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">'init text'</span>
<span class="token punctuation">)</span>
</code></pre></div><p>Or use <code>startWith</code>. Pass <code>true</code> to <code>TSyncInit</code> generic to remove <code>undefined</code> from resulted type.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// time is `string` now instead of `string | undefined`</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>text<span class="token punctuation">,</span> updateText<span class="token punctuation">]</span> <span class="token operator">=</span> useObservableState<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>
  <span class="token parameter">text$</span> <span class="token operator">=&gt;</span> text$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">startWith</span><span class="token punctuation">(</span><span class="token string">'init text'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><p>For Observables you can also use the non-null assertion operator <code>!</code>.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// time is `string` now instead of `string | undefined`</span>
<span class="token keyword">const</span> time <span class="token operator">=</span> <span class="token function">useObservableState</span><span class="token punctuation">(</span>
  <span class="token function">useObservable</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token function">interval</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
      <span class="token function">startWith</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token operator">!</span>
</code></pre></div><p>Event listener:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> pluckCurrentTargetValue<span class="token punctuation">,</span> useObservableState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'observable-hooks'</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>text<span class="token punctuation">,</span> onChange<span class="token punctuation">]</span> <span class="token operator">=</span> useObservableState<span class="token operator">&lt;</span>
<span class="token builtin">string</span><span class="token punctuation">,</span>
React<span class="token punctuation">.</span>ChangeEvent<span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">&gt;</span>
<span class="token operator">&gt;</span><span class="token punctuation">(</span>pluckCurrentTargetValue<span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/crimx/observable-hooks/edit/master/docs/api/README.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/api/suspense.html">
        Suspense
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.2600191b.js" defer></script><script src="/assets/js/3.c8cfc7ab.js" defer></script><script src="/assets/js/9.1976d09d.js" defer></script><script src="/assets/js/5.52e4f033.js" defer></script><script src="/assets/js/4.ab8b6a84.js" defer></script>
  </body>
</html>
